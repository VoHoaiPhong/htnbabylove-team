<div class="khung-mau col-sm-4">
    <div class="khungchuamau w50">
        <div class="them-mau btn btn-default">
            <i class="fa fa-plus"></i>
        </div>
        <div class="select_color testcolor">
            <input type="color" name="color1" style="width:25px;height:25px;">
            <input type="color" name="color2" style="width:25px;height:25px;">
            <br>
            <button class="check" type="button" style="background:none;border-radius:50%;"><i class="fa fa-check" style="color:#68b3c8"></i></button>
        </div>
    </div>
    <div class="demo-color btn btn-default" id="demo-color1" name="add-color[]" mutiple>
        <span><i class="fa fa-close"></i></span>
    </div>
</div>

<script>
    $(".them-mau").on("click", function() {
        $(this).next(".testcolor").css("display", "block");
    });
    var i = 1;
    var removecolor = [];

    $('.check').on('click', function() {
        if (i == 1) {
            $(".demo-color").css("display", "inline-block");
            color1 = $('.select_color input[name="color1"]').val();
            color2 = $('.select_color input[name="color2"]').val();
            string = 'repeating-linear-gradient';
            $("#demo-color1").css('background', '' + string + '(' + color1 + ',' + color1 + ' 10%,' + color2 + ' 10%,' + color2 + ' 20%)');

            $(this).parent(".testcolor").css("display", "none");
            removecolor.push("demo-color1");

            $('#demo-color1').on('click', function() {
                $(this).remove();
                var deleteE = "demo-color1";

                var demoten = removecolor.indexOf(deleteE);


                if (demoten != -1) {
                    removecolor.splice(demoten, 1);
                }

                if (removecolor == "") {
                    i = 1;
                    $(".khung-mau").append('<div class="demo-color btn btn-default" id="demo-color1" name="add-color[]" mutiple><span><i class="fa fa-close"></i></span></div>');
                }
            });

        } else {
            var id = $("#demo-color" + (i - 1)).clone();
            id.attr("id", "demo-color" + i);
            $(".khung-mau").append(id);

            color1 = $('.select_color input[name="color1"]').val();
            color2 = $('.select_color input[name="color2"]').val();
            string = 'repeating-linear-gradient';
            id.css('background', '' + string + '(' + color1 + ',' + color1 + ' 10%,' + color2 + ' 10%,' + color2 + ' 20%)');

            $(this).parent(".testcolor").css("display", "none");

            var demoid = id.attr('id');
            removecolor.push(demoid);


            id.on('click', function() {
                var deleteElmt = demoid;
                var demoname = removecolor.indexOf(deleteElmt);

                id.remove();
                if (demoname != -1) {
                    removecolor.splice(demoname, 1);
                }
                if (removecolor == "") {
                    i = 1;
                    $(".khung-mau").append('<div class="demo-color btn btn-default" id="demo-color1" name="add-color[]" mutiple><span><i class="fa fa-close"></i></span></div>');
                }
            });
        }
        i++;
    });

</script>